<!DOCTYPE html>
<html lang="zh-Hant">
<head>
     <!-- å›åˆ°å¥åº·å¤§å»³æŒ‰éˆ• (ç§»åˆ° body å…§) -->
    <a href="https://lukehsiao-yc.github.io/for_healthy_children/" 
       style="position: fixed; 
              top: 20px; 
              left: 20px; 
              background-color: #f43f5e; 
              color: white; 
              padding: 10px 16px; 
              border-radius: 50px; 
              text-decoration: none; 
              font-weight: bold; 
              box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
              z-index: 9999; 
              display: flex; 
              align-items: center; 
              font-family: 'Noto Sans TC', sans-serif;
              transition: transform 0.2s;">
       <span style="margin-right: 6px; font-size: 18px;">ğŸ </span> å›åˆ°å¤§å»³
    </a>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ç£å…’ç«¥æ¯æ—¥é£²é£Ÿå»ºè­°é‡æŸ¥è©¢</title>
    <!-- å¼•å…¥ Tailwind CSS ä»¥é€²è¡Œå¿«é€Ÿã€ç¾è§€çš„æ’ç‰ˆ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* éš±è—æ²è»¸ä½†ä¿ç•™æ»¾å‹•åŠŸèƒ½ (é‡å°éƒ¨åˆ†ç¾åŒ–éœ€æ±‚) */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen flex items-center justify-center p-4 font-sans">

    <!-- ä¸»å¡ç‰‡å®¹å™¨ -->
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden border border-slate-100">
        
        <!-- é ‚éƒ¨æ¨™é¡Œå€å¡Š -->
        <div class="bg-blue-600 p-6 text-white text-center">
            <h1 class="text-2xl font-bold mb-2">ğŸ å°ç£å…’ç«¥æ¯æ—¥é£²é£Ÿå»ºè­°é‡æŸ¥è©¢</h1>
            <p class="text-blue-100 text-sm mb-1">å‘Šåˆ¥é›²æœµäºº å…’ç«¥æ¸›é‡ä¸€èµ·ä¾† | è•­å®‡è¶…é†«å¸«æ•´ç†è£½ä½œ</p>
            <p class="text-blue-200 text-xs">è³‡æ–™ä¾†æºï¼šå°ç£åœ‹æ°‘å¥åº·ç½²</p>
        </div>

        <!-- è¡¨å–®å€å¡Š -->
        <div class="p-6 space-y-5">
            
            <!-- å¹´é½¡é¸æ“‡ -->
            <div>
                <label for="age" class="block text-sm font-semibold text-slate-700 mb-2">è«‹é¸æ“‡å¹´é½¡ç¯„åœï¼š</label>
                <select id="age" class="w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 outline-none transition-colors">
                    <option value="1-3">1-3 æ­²</option>
                    <option value="4-6">4-6 æ­²</option>
                    <option value="7-8">7-8 æ­²</option>
                    <option value="9-12">9-12 æ­²</option>
                    <option value="13-15">13-15 æ­²</option>
                    <option value="16-18">16-18 æ­²</option>
                </select>
            </div>

            <!-- æ€§åˆ¥é¸æ“‡ -->
            <div>
                <label class="block text-sm font-semibold text-slate-700 mb-2">è«‹é¸æ“‡æ€§åˆ¥ï¼š</label>
                <div class="flex space-x-4">
                    <label class="flex items-center space-x-2 cursor-pointer bg-slate-50 px-4 py-2 border border-slate-300 rounded-lg flex-1 hover:bg-blue-50 transition-colors">
                        <input type="radio" name="gender" value="ç”·" checked class="w-4 h-4 text-blue-600 focus:ring-blue-500 cursor-pointer">
                        <span class="text-slate-700 font-medium">ğŸ‘¦ ç”·ç”Ÿ</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer bg-slate-50 px-4 py-2 border border-slate-300 rounded-lg flex-1 hover:bg-blue-50 transition-colors">
                        <input type="radio" name="gender" value="å¥³" class="w-4 h-4 text-pink-500 focus:ring-pink-500 cursor-pointer">
                        <span class="text-slate-700 font-medium">ğŸ‘§ å¥³ç”Ÿ</span>
                    </label>
                </div>
            </div>

            <!-- æ´»å‹•å¼·åº¦é¸æ“‡ -->
            <div>
                <label for="activity" class="block text-sm font-semibold text-slate-700 mb-2">è«‹é¸æ“‡æ´»å‹•å¼·åº¦ï¼š</label>
                <select id="activity" class="w-full bg-slate-50 border border-slate-300 text-slate-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 outline-none transition-colors">
                    <option value="ç¨ä½">ç¨ä½ (å¤šç‚ºéœæ…‹æ´»å‹•)</option>
                    <option value="é©åº¦">é©åº¦ (æœ‰è¦å¾‹é‹å‹•ç¿’æ…£)</option>
                </select>
            </div>

            <!-- æŸ¥è©¢æŒ‰éˆ• -->
            <button onclick="queryDiet()" class="w-full mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                ğŸ” æŸ¥è©¢é£²é£Ÿå»ºè­°
            </button>

        </div>

        <!-- çµæœé¡¯ç¤ºå€å¡Š (é è¨­éš±è—) -->
        <div id="result-container" class="hidden bg-slate-50 border-t border-slate-100 p-6">
            <h2 class="text-lg font-bold text-slate-800 mb-4 border-b pb-2 flex items-center justify-between">
                <span>ğŸ“‹ æ¯æ—¥é£²é£Ÿå»ºè­°é‡</span>
                <span id="result-calories" class="text-orange-500 font-black text-xl"></span>
            </h2>
            
            <div id="error-message" class="hidden text-red-500 font-medium text-center py-4">
                æŸ¥ç„¡å°æ‡‰çš„é£²é£Ÿå»ºè­°ï¼Œè«‹ç¢ºèªè¼¸å…¥æ¢ä»¶æ˜¯å¦æ­£ç¢ºã€‚
            </div>

            <ul id="result-list" class="space-y-3">
                <!-- Javascript å°‡å‹•æ…‹å¡«å…¥çµæœæ¸…å–® -->
            </ul>
        </div>
    </div>

    <!-- JavaScript é‚è¼¯ -->
    <script>
        // å°‡ Python ä¸­çš„å­—å…¸æ ¼å¼è½‰æ›ç‚º JavaScript ç‰©ä»¶
        const rawData = {
            "å¹´é½¡": [
                "1-3", "1-3", "1-3", "1-3", "4-6", "4-6", "4-6", "4-6",
                "7-8", "7-8", "7-8", "7-8", "9-12", "9-12", "9-12", "9-12",
                "13-15", "13-15", "13-15", "13-15", "16-18", "16-18", "16-18", "16-18"
            ],
            "æ€§åˆ¥": ["ç”·", "ç”·", "å¥³", "å¥³", "ç”·", "ç”·", "å¥³", "å¥³", "ç”·", "ç”·", "å¥³", "å¥³", "ç”·", "ç”·", "å¥³", "å¥³", "ç”·", "ç”·", "å¥³", "å¥³", "ç”·", "ç”·", "å¥³", "å¥³"],
            "æ´»å‹•å¼·åº¦": ["ç¨ä½", "é©åº¦", "ç¨ä½", "é©åº¦", "ç¨ä½", "é©åº¦", "ç¨ä½", "é©åº¦", "ç¨ä½", "é©åº¦", "ç¨ä½", "é©åº¦",
                        "ç¨ä½", "é©åº¦", "ç¨ä½", "é©åº¦", "ç¨ä½", "é©åº¦", "ç¨ä½", "é©åº¦", "ç¨ä½", "é©åº¦", "ç¨ä½", "é©åº¦"],
            "ç†±é‡ (å¤§å¡)": [1150, 1350, 1150, 1350, 1550, 1800, 1400, 1650, 1800, 2100, 1650, 1900, 2050,
                          2350, 1950, 2250, 2400, 2800, 2050, 2350, 2500, 2900, 1900, 2250],
            "å…¨æ¦–é›œç³§é¡ (ç¢—)": [1.5, 2, 1.5, 2, 2.5, 3, 2, 3, 3, 3.5, 2.5, 3, 3, 4, 3, 3.5, 4, 4.5, 3, 4, 4, 4.5, 3, 3.5],
            "è±†é­šè›‹è‚‰é¡ (ä»½)": [2, 3, 2, 3, 3, 4, 3, 3, 5, 6, 4, 5.5, 6, 6, 6, 6, 6, 8, 6, 6, 7, 9, 5.5, 6],
            "ä¹³å“é¡ (æ¯)": [2, 2, 2, 2, 2, 2, 2, 2, 1.5, 1.5, 1.5, 1.5, 1.5, 1.5, 1.5, 1.5, 1.5, 2, 1.5, 1.5, 1.5, 2, 1.5, 1.5],
            "è”¬èœé¡ (ä»½)": [2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 3, 3, 4, 4, 3, 4, 5, 5, 4, 4, 5, 5, 3, 4],
            "æ°´æœé¡ (ä»½)": [2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 3, 4, 3, 3.5, 4, 4, 3, 4, 4, 4, 3, 3.5],
            "æ²¹è„‚èˆ‡å …æœç¨®å­é¡ (ä»½)": [4, 4, 4, 4, 4, 5, 4, 4, 5, 6, 5, 5, 6, 6, 5, 6, 7, 8, 6, 6, 7, 8, 5, 6]
        };

        // æ¨¡æ“¬ Pandas DataFrameï¼Œå°‡ç›´æ¬„è³‡æ–™è½‰ç‚ºæ©«åˆ—é™£åˆ—ä»¥ä¾¿æ–¼æœå°‹
        const dietDatabase = [];
        const rowCount = rawData["å¹´é½¡"].length;
        
        for (let i = 0; i < rowCount; i++) {
            let row = {};
            for (const key in rawData) {
                row[key] = rawData[key][i];
            }
            dietDatabase.push(row);
        }

        // æ­é…ä¸€äº›å°åœ–ç¤ºè®“çµæœæ›´ç”Ÿå‹•
        const icons = {
            "å…¨æ¦–é›œç³§é¡ (ç¢—)": "ğŸš",
            "è±†é­šè›‹è‚‰é¡ (ä»½)": "ğŸ¥š",
            "ä¹³å“é¡ (æ¯)": "ğŸ¥›",
            "è”¬èœé¡ (ä»½)": "ğŸ¥¬",
            "æ°´æœé¡ (ä»½)": "ğŸ",
            "æ²¹è„‚èˆ‡å …æœç¨®å­é¡ (ä»½)": "ğŸ¥œ"
        };

        function queryDiet() {
            // å–å¾—ä½¿ç”¨è€…è¼¸å…¥çš„å€¼
            const ageGroup = document.getElementById("age").value;
            const gender = document.querySelector('input[name="gender"]:checked').value;
            const activityLevel = document.getElementById("activity").value;

            // åœ¨è³‡æ–™åº«ä¸­å°‹æ‰¾ç›¸ç¬¦çš„ç´€éŒ„ (æ¨¡æ“¬ Pandas æ¢ä»¶éæ¿¾)
            const result = dietDatabase.find(
                item => item["å¹´é½¡"] === ageGroup && 
                        item["æ€§åˆ¥"] === gender && 
                        item["æ´»å‹•å¼·åº¦"] === activityLevel
            );

            // æº–å‚™æ›´æ–°ä»‹é¢
            const container = document.getElementById("result-container");
            const errorMessage = document.getElementById("error-message");
            const resultList = document.getElementById("result-list");
            const caloriesDisplay = document.getElementById("result-calories");

            container.classList.remove("hidden"); // é¡¯ç¤ºçµæœå€å¡Š
            resultList.innerHTML = ""; // æ¸…ç©ºä¹‹å‰çš„çµæœ

            if (!result) {
                // æ‰¾ä¸åˆ°è³‡æ–™
                errorMessage.classList.remove("hidden");
                resultList.classList.add("hidden");
                caloriesDisplay.textContent = "";
            } else {
                // æ‰¾åˆ°è³‡æ–™
                errorMessage.classList.add("hidden");
                resultList.classList.remove("hidden");
                
                // ç¨ç«‹é¡¯ç¤ºç†±é‡
                caloriesDisplay.textContent = `${result["ç†±é‡ (å¤§å¡)"]} å¤§å¡`;

                // ç”¢ç”Ÿæ¸…å–®é …ç›® (æ’é™¤å‰å››å€‹ç”¨ä¾†æœå°‹/ç¸½çµçš„å±¬æ€§)
                const skipKeys = ["å¹´é½¡", "æ€§åˆ¥", "æ´»å‹•å¼·åº¦", "ç†±é‡ (å¤§å¡)"];
                
                for (const [key, value] of Object.entries(result)) {
                    if (!skipKeys.includes(key)) {
                        const icon = icons[key] || "âœ¨";
                        const li = document.createElement("li");
                        li.className = "flex justify-between items-center bg-white p-3 rounded border border-slate-100 shadow-sm";
                        li.innerHTML = `
                            <span class="text-slate-600 font-medium flex items-center gap-2">
                                <span class="text-xl">${icon}</span> ${key}
                            </span>
                            <span class="font-bold text-blue-600 text-lg">${value}</span>
                        `;
                        resultList.appendChild(li);
                    }
                }
            }
        }
    </script>
</body>

</html>
